<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>An introduction to Docker — Eric's Blog</title>
	<meta name="description" content="Title: An introduction to Docker; Date: 2017-10-25; Author: Eric Daoud">
	<meta name="author" content="Eric Daoud">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="https://ericdaat.github.io/theme/html5.js"></script>
		<![endif]-->
	<link href="https://ericdaat.github.io/theme/css/ipython.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="https://ericdaat.github.io/theme/css/local.css" rel="stylesheet">
	<link href="https://ericdaat.github.io/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="https://ericdaat.github.io/">Eric's Blog</a>
			<br><small>Jr. Data Scientist</small></h1>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="text-center article-header">
		<h1 itemprop="name headline" class="article-title">An introduction to Docker</h1>
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<h4 itemprop="name">Eric Daoud</h4>
		</span>
		<time datetime="2017-10-25T10:20:00+02:00" itemprop="datePublished">Wed 25 October 2017</time>
	</div>
	<div>
		Category:
		<span itemprop="articleSection">
			<a href="https://ericdaat.github.io/category/programming.html" rel="category">Programming</a>
		</span>
	</div>
	<div>
		Tags:
		<span itemprop="keywords">
			<a href="https://ericdaat.github.io/tag/docker.html" rel="tag">docker</a>
		</span>
		<span itemprop="keywords">
			<a href="https://ericdaat.github.io/tag/code.html" rel="tag">code</a>
		</span>
		<span itemprop="keywords">
			<a href="https://ericdaat.github.io/tag/devops.html" rel="tag">devops</a>
		</span>
	</div>
	<div itemprop="articleBody" class="article-body"><p>This post is a short tutorial to Docker. We will first talk about what Docker is and how it differs from virtual machines. Then, we will learn how to get started and run your first container.</p>
<h1>Introduction</h1>
<h2>What is Docker ?</h2>
<blockquote>
<p>“Docker containers wrap a piece of software in a complete filesystem that
contains everything needed to run: code, runtime, system tools, system libraries
– anything that can be installed on a server. This guarantees that the software
will always run the same, regardless of its environment.”<br>
<em>Source: <a href="https://www.docker.com/what-docker">Docker Website</a></em></p>
</blockquote>
<h2>Advantages</h2>
<p>Docker has some of the following advantages:</p>
<ul>
<li>Lightweight<ul>
<li>Containers share the same kernel (unlike Virtual Machines)</li>
<li>Use less RAM</li>
<li>Share common files (No need to duplicate files on each container)</li>
</ul>
</li>
<li>Open<ul>
<li>Run all major Linux distributions … as well as Windows, on top of any
infrastructure</li>
<li>Can pull images from official sources (OS like Ubuntu, Debian … or even
pre-configured applications like Redis, Nginx, …)</li>
</ul>
</li>
<li>Secure<ul>
<li>Containers isolate applications from one another</li>
</ul>
</li>
</ul>
<h2>Virtual Machines vs. Containers</h2>
<ul>
<li>Virtual Machines include the application, necessary binaries and libraries and
entire guest OS</li>
<li>Containers include application and all of its dependencies, but share the kernel!
 They can run on any computer/infrastructure/cloud</li>
</ul>
<p><img alt="vms-vs-containers" src="https://www.docker.com/sites/default/files/containers-vms-together%402x.png"></p>
<h1>Installation</h1>
<p>You will need to do 3 things:</p>
<ul>
<li><a href="https://docs.docker.com/engine/installation/">Install Docker Engine</a></li>
<li><a href="https://docs.docker.com/engine/installation/">Post steps installation if you use Linux</a></li>
<li><a href="https://docs.docker.com/compose/install/">Install Docker Compose</a> (<em>optional</em>)</li>
</ul>
<p>Below are the commands you will need to install Docker Community Edition (Docker
CE) on Ubuntu/Debian.</p>
<div class="highlight"><pre><span></span>sudo apt-get update

sudo apt-get install <span class="se">\</span>
    apt-transport-https <span class="se">\</span>
    ca-certificates <span class="se">\</span>
    curl <span class="se">\</span>
    software-properties-common

curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> sudo apt-key add -

sudo add-apt-repository <span class="se">\</span>
    <span class="s2">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span>
<span class="s2">    </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> \</span>
<span class="s2">    stable&quot;</span>

sudo apt-get update

sudo apt-get install docker-ce

sudo docker run hello-world
</pre></div>


<p>From now on the Docker Engine is installed, but you will only be able to run it
with <em>sudo</em>, which is not ideal. To fix this, Docker provides some post
installation steps, that correspond to the following commands:</p>
<div class="highlight"><pre><span></span>sudo groupadd docker
sudo usermod -aG docker <span class="nv">$USER</span>
docker run hello-world <span class="c1"># works without sudo!</span>
</pre></div>


<p>I like to use Docker Compose to deploy my containers. You can specify your
containers and their configuration in a <em>yaml</em> file, and then run them all at
once. To install Docker Compose, run the following commands:</p>
<div class="highlight"><pre><span></span>sudo curl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-<span class="sb">`</span>uname -s<span class="sb">`</span>-<span class="sb">`</span>uname -m<span class="sb">`</span> -o /usr/local/bin/docker-compose

sudo chmod +x /usr/local/bin/docker-compose

docker-compose --version
</pre></div>


<h1>First steps</h1>
<p>Let's get started and run our first container. A container runs from an image, just like an object is instanciated from an image in Object Oriented Programming. This means that before running a container, we must build or download an existing image.</p>
<p>Just like OOP, you don't have to start from scratch and you can use prebuilt images to get started. For instance, if you want to run a website in an apache webserver, you can use apache's docker image, and customize it to your needs. You could also start from a lower level, and use a Debian image on which you'd install apache webserver.</p>
<p>We said earlier that images could be built or downloaded. To build an image, you can use a Dockerfile which is a text file in which you specify the commands to build your docker image. The Dockerfile reference can be found on Docker's website following <a href="https://docs.docker.com/engine/reference/builder/">this link</a>. Note that this file must be named "Dockerfile" (keep the capital D).</p>
<p>A very simple Dockerfile may look like this:</p>
<div class="highlight"><pre><span></span>FROM ubuntu
CMD echo &quot;This is a test.&quot;
</pre></div>


<p>This will pull the ubuntu Docker image, run it and display "This is a test.". After this commands succeeds, the container will stop. This is very important, a container lives as long as the command assigned to it runs. This also means that you must not run more than one application per container.</p>
<p>In the previous example, we used ubuntu image by pulling it to our own image. A lot of pre-existing images are stored and usable by everybody. They are all available on <a href="https://hub.docker.com/explore/">Docker Hub</a>. You can find official images like Debian, Ubuntu, Nginx... But also images than other people built.</p>
<p>Here are some basic commands to get you started with Docker:</p>
<div class="highlight"><pre><span></span>docker build . <span class="c1"># builds a container from a Dockerfile (using the Dockerfile is in the active directory)</span>
docker pull debian:latest <span class="c1"># pulls the latest version of the debian image</span>
docker run &lt;image-name&gt; <span class="c1"># runs a container from an imqge</span>
docker ps <span class="c1"># lists the running containers</span>
docker ps -a <span class="c1"># lists all the containers</span>
docker images <span class="c1"># lists the built images</span>
docker rm &lt;container-id&gt; <span class="c1"># removes a stopped container</span>
docker rm -f &lt;container-id&gt; <span class="c1"># force remove a container</span>
docker rmi &lt;image-id&gt; <span class="c1"># removes a built image</span>
</pre></div>


<h1>Running your first container</h1>
<p>Let's run an apache webserver, using the <a href="https://hub.docker.com/r/_/httpd/">Apache HTTP</a> image.</p>
<div class="highlight"><pre><span></span>docker pull httpd:latest
</pre></div>


<p>Now you should see the httpd image when running <code>docker images</code> command.</p>
<p>When you run a container, you can give it several options. Let's have a look at this command:</p>
<div class="highlight"><pre><span></span>docker run -d -p <span class="m">80</span>:80 my_image
</pre></div>


<p>Here, we asked docker to run an image called <em>my_image</em> with the following options:</p>
<ul>
<li>-d: The container runs in <em>detached</em> mode (in background)</li>
<li>-p: We are mapping the container's port 80 to our localhost:80. This means that we can access the container's application on our host. Without this option, the container would still run, but we woudldn't be able to access its application.</li>
</ul>
<p>With such a configuration, you can open a web browser and visit <em>localhost</em>. This will display the container's apache web server content.</p>
<h2>Attaching volumes</h2>
<p>Let's say we created a very cool static website in HTML/CSS, and we stored it in our <em>/var/www/html</em> local directory. So far our apache container only displays the defaut <em>index.html</em> file. How can we pass the container the awesome website we built ? There are several options, including:</p>
<ul>
<li>Copy the content from the host to the container when building the image. This means that the data will be stored within the image. If you save the image and pull it somewhere, you will have a copy of the data with it. If you delete the container, you delete the data. If you want to launch the same container several times, they will all have a distinct copy of the data.</li>
<li>Link the data between the host and the container. This is often a preferred option. By doing this, you don't store the data within the container, you simply create a link from a folder on your host, to the container. This is called volume mapping. Doing so is much more lightweight, but requires to have the data locally. Another advantage is that if you want to run multiple containers from the same image, they can use the same data. If you change the data locally, the containers will render the newer data.</li>
</ul>
<p>To copy data from the host to the container image, add a <em>COPY</em> command to your Dockerfile, like so:</p>
<div class="highlight"><pre><span></span>FROM httpd
COPY /var/www/html:/var/www/html
</pre></div>


<p>To link a volume, add the <em>-v</em> option to the <em>run</em> command:</p>
<div class="highlight"><pre><span></span>docker run -d -p <span class="m">80</span>:80 -v /var/www/html:/var/www/html httpd
</pre></div>


<p>Voila! Your container should now be running an apache web server in detached mode. And since we mapped the volume containing our awesome website, what you see on <em>localhost</em> is exactly what we have under the local <em>/var/www/html</em> directory.</p></div>
	<hr>
    <!-- <h2>Comments</h2> -->
</div>
		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->
<footer class="aw-footer bg-danger">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://ericdaat.github.io">Eric's Blog</a></li>
							<li><a href="https://ericdaat.github.io//archives.html"><i class="fa fa-Archives "></i> Archives</a></li>
							<li><a href="https://ericdaat.github.io//categories.html"><i class="fa fa-Categories "></i> Categories</a></li>
							<li><a href="https://ericdaat.github.io/pages/about-me.html"><i class="fa fa-About me "></i> About me</a></li>
							<li><a href="https://ericdaat.github.io/feeds/all.atom.xml" type="application/atom+xml"><i class="fa fa-rss "></i> atom</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://github.com/ericdaat">Github</a></li>
							<li><a href="https://twitter.com/ericdaoud">Twitter</a></li>
							<li><a href="https://www.youtube.com/user/ericmusic13">Youtube</a></li>
							<li><a href="https://www.linkedin.com/in/ericdaoud/">Linkedin</a></li>
							<li><a href="https://500px.com/ericda">500px</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Categories</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="https://ericdaat.github.io/category/photography.html">Photography (1)</a></li>
							<li><a href="https://ericdaat.github.io/category/programming.html">Programming (5)</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; Eric Daoud 2016</p>
			<p>Powered by Pelican</p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-105599779-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>